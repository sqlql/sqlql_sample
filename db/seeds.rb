import = -> (klass, md_table) do
  header_string, _, *lines = md_table.each_line.map(&:chomp)
  header = header_string.split('|').map(&:strip)[1..-1]
  lines.each do |line|
    params = line.split('|').map(&:strip)[1..-1]
    klass.create(header.zip(params).to_h)
  end
end

import.(User, <<~MD)
| id | name      | key                                  | privacy | created_at                 | updated_at          |
|----|-----------|--------------------------------------|---------|----------------------------|---------------------|
| 10 | yancya    | 6f916ae6-8472-463a-9808-6af19e459541 | f       | 2017-09-18 04:59:38.507022 | 2017-09-18 04:59:38 |
| 11 | testuser  | 5a05a425-2bb3-4c2c-87a1-5c5513492bfb | f       | 2017-09-18 05:09:13.531304 | 2017-09-18 05:09:13 |
| 14 | secretman | 4f3326a4-b900-4624-af58-87e8f363dee6 | t       | 2017-09-19 02:26:57.195464 | 2017-09-19 02:26:57 |
MD

import.(Comment, <<~MD)
| id | user_id | content          | privacy | created_at                 | updated_at                 |
|----|---------|------------------|---------|----------------------------|----------------------------|
|  8 |      10 | hoge             | f       | 2017-09-18 05:00:11.05575  | 2017-09-18 05:00:11.05575  |
|  9 |      10 | fuga             | f       | 2017-09-18 05:00:16.522117 | 2017-09-18 05:00:16.522117 |
| 10 |      10 | piyo             | f       | 2017-09-18 05:00:21.613141 | 2017-09-18 05:00:21.613141 |
| 11 |      10 | it is secret     | t       | 2017-09-18 05:00:45.634707 | 2017-09-18 05:00:45.634707 |
| 12 |      11 | it is secret     | t       | 2017-09-18 05:09:52.393868 | 2017-09-18 05:09:52.393868 |
| 13 |      11 | it is not secret | f       | 2017-09-18 05:10:05.927487 | 2017-09-18 05:10:05.927487 |
MD

import.(Like, <<~MD)
| id | user_id | comment_id | created_at                 | updated_at                 |
|----|---------|------------|----------------------------|----------------------------|
|  8 |      10 |         11 | 2017-09-18 05:04:19.505836 | 2017-09-18 05:04:19.505836 |
|  9 |      10 |         10 | 2017-09-18 05:04:23.85745  | 2017-09-18 05:04:23.85745  |
| 10 |      10 |          9 | 2017-09-18 05:04:26.740116 | 2017-09-18 05:04:26.740116 |
| 11 |      10 |          8 | 2017-09-18 05:04:29.185687 | 2017-09-18 05:04:29.185687 |
| 12 |      10 |          9 | 2017-09-18 05:04:32.062099 | 2017-09-18 05:04:32.062099 |
| 13 |      10 |         10 | 2017-09-18 05:04:33.455075 | 2017-09-18 05:04:33.455075 |
| 14 |      10 |          8 | 2017-09-18 05:04:34.871388 | 2017-09-18 05:04:34.871388 |
| 15 |      10 |         10 | 2017-09-18 05:04:36.449477 | 2017-09-18 05:04:36.449477 |
| 16 |      10 |         12 | 2017-09-18 05:11:41.174168 | 2017-09-18 05:11:41.174168 |
| 17 |      10 |         12 | 2017-09-18 05:11:41.914313 | 2017-09-18 05:11:41.914313 |
| 18 |      10 |         12 | 2017-09-18 05:11:42.387759 | 2017-09-18 05:11:42.387759 |
| 19 |      10 |         12 | 2017-09-18 05:11:43.713585 | 2017-09-18 05:11:43.713585 |
| 20 |      10 |         12 | 2017-09-18 05:11:44.244417 | 2017-09-18 05:11:44.244417 |
| 21 |      10 |         13 | 2017-09-18 05:11:48.028928 | 2017-09-18 05:11:48.028928 |
| 22 |      10 |         13 | 2017-09-18 05:11:50.945295 | 2017-09-18 05:11:50.945295 |
| 23 |      10 |         13 | 2017-09-18 05:13:34.048887 | 2017-09-18 05:13:34.048887 |
| 24 |      10 |         13 | 2017-09-18 05:15:50.857694 | 2017-09-18 05:15:50.857694 |
| 25 |      11 |          9 | 2017-09-18 05:23:01.764913 | 2017-09-18 05:23:01.764913 |
| 26 |      11 |         10 | 2017-09-18 05:23:07.392301 | 2017-09-18 05:23:07.392301 |
| 27 |      11 |         11 | 2017-09-18 05:23:10.6083   | 2017-09-18 05:23:10.6083   |
| 28 |      11 |         12 | 2017-09-18 05:23:13.162275 | 2017-09-18 05:23:13.162275 |
| 29 |      11 |         13 | 2017-09-18 05:23:15.535289 | 2017-09-18 05:23:15.535289 |
| 30 |      14 |          8 | 2017-09-20 05:10:20.676045 | 2017-09-20 05:10:20.676045 |
| 31 |      14 |          9 | 2017-09-20 05:10:23.789931 | 2017-09-20 05:10:23.789931 |
MD
